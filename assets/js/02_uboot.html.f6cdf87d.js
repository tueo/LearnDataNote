"use strict";(self.webpackChunklearn_data=self.webpackChunklearn_data||[]).push([[5190],{3671:(a,n)=>{n.A=(a,n)=>{const e=a.__vccOpts||a;for(const[a,s]of n)e[a]=s;return e}},5635:(a,n,e)=>{e.r(n),e.d(n,{comp:()=>c,data:()=>d});var s=e(7847);const o=(0,s.Lk)("h2",{id:"选择-uboot",tabindex:"-1"},[(0,s.Lk)("a",{class:"header-anchor",href:"#选择-uboot"},[(0,s.Lk)("span",null,"选择 uboot")])],-1),t=(0,s.Lk)("p",null,"这里选择歪多拉的 u-boot，该版本支持 web 升级，项目说明也比较多，适合入门。",-1),p=(0,s.Lk)("h2",{id:"构建第一个-uboot-镜像",tabindex:"-1"},[(0,s.Lk)("a",{class:"header-anchor",href:"#构建第一个-uboot-镜像"},[(0,s.Lk)("span",null,"构建第一个 uboot 镜像")])],-1),r={href:"https://widora.cn/compile",target:"_blank",rel:"noopener noreferrer"},l=(0,s.Fv)('<ul><li>源码下载</li></ul><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/widora/u-boot-mt7688.git\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>解压编译工具链到/opt/目录下</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> u-boot-mt7688\n<span class="token function">sudo</span> <span class="token function">tar</span> xvfj buildroot-gcc342.tar.bz2 <span class="token parameter variable">-C</span> /opt/\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>安装 openjdk, 并保证系统语言为英文</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> openjdk-8-jdk\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>进入 u-boot-mt7688 源码，编译</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> u-boot-mt7688\n<span class="token function">make</span> clean<span class="token punctuation">;</span><span class="token function">make</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>生成的 uboot 固件文件为 <code>uboot.bin</code>, 从编译完的输出信息可以看到，生成的镜像大小为 110376 Bytes, 没有超出 bootloader 的大小限制。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>Image Name:   SPI Flas\nCreated:      Sun Aug <span class="token number">25</span> <span class="token number">20</span>:05:45 <span class="token number">2024</span>\nImage Type:   MIPS Linux Standalone Program <span class="token punctuation">(</span>uncompressed<span class="token punctuation">)</span>\nData Size:    <span class="token number">110376</span> Bytes <span class="token operator">=</span> <span class="token number">107.79</span> kB <span class="token operator">=</span> <span class="token number">0.11</span> MB\nLoad Address: 0xBC000000\nEntry Point:  0xBC000000\nDRAM Parameter: <span class="token number">29</span> <span class="token punctuation">(</span>Parm0<span class="token operator">=</span><span class="token number">0</span> <span class="token assign-left variable">Parm1</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>\n\n<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">=</span><span class="token operator">&lt;&lt;</span>IMPORTANT<span class="token operator">&gt;&gt;</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>\nNotes:Uboot firmware is uboot.bin NOT uboot.img\n<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="调整-uboot-镜像" tabindex="-1"><a class="header-anchor" href="#调整-uboot-镜像"><span>调整 uboot 镜像</span></a></h2><ol><li>flash 大小需要为 16MB</li><li>RAM 的大小需要调整为 64MB</li></ol><p>通过<code>make menuconfig</code> 进入配置界面，修改配置，将 DDR size 调整 512Mb, 也就是 64MB。 <img src="https://raw.githubusercontent.com/tueo/cloudimg/main/img/20240826111036.png" alt="" loading="lazy"></p><h2 id="uboot-下命令行方式更新固件方式" tabindex="-1"><a class="header-anchor" href="#uboot-下命令行方式更新固件方式"><span>uboot 下命令行方式更新固件方式</span></a></h2><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>Please choose the operation:\n   1: Load system code to SDRAM via TFTP.\n   2: Load system code then write to Flash via TFTP.\n   3: Boot system code via Flash (default).\n   4: Entr boot command line interface.\n   7: Load Boot Loader code then write to Flash via Serial.\n   9: Load Boot Loader code then write to Flash via TFTP.\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>',15),i={},c=(0,e(3671).A)(i,[["render",function(a,n){const e=(0,s.g2)("ExternalLinkIcon");return(0,s.uX)(),(0,s.CE)("div",null,[o,t,p,(0,s.Lk)("p",null,[(0,s.eW)("歪多拉的编译参考 "),(0,s.Lk)("a",r,[(0,s.eW)("编译"),(0,s.bF)(e)])]),l])}]]),d=JSON.parse('{"path":"/protocol/linux/02_uboot.html","title":"","lang":"zh-CN","frontmatter":{"description":"选择 uboot 这里选择歪多拉的 u-boot，该版本支持 web 升级，项目说明也比较多，适合入门。 构建第一个 uboot 镜像 歪多拉的编译参考 编译 源码下载 解压编译工具链到/opt/目录下 安装 openjdk, 并保证系统语言为英文 进入 u-boot-mt7688 源码，编译 生成的 uboot 固件文件为 uboot.bin, 从编...","head":[["meta",{"property":"og:url","content":"https://newzone.top/protocol/linux/02_uboot.html"}],["meta",{"property":"og:site_name","content":"三月的油菜花"}],["meta",{"property":"og:description","content":"选择 uboot 这里选择歪多拉的 u-boot，该版本支持 web 升级，项目说明也比较多，适合入门。 构建第一个 uboot 镜像 歪多拉的编译参考 编译 源码下载 解压编译工具链到/opt/目录下 安装 openjdk, 并保证系统语言为英文 进入 u-boot-mt7688 源码，编译 生成的 uboot 固件文件为 uboot.bin, 从编..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://raw.githubusercontent.com/tueo/cloudimg/main/img/20240826111036.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-08-28T01:59:03.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"property":"article:author","content":"LearnData"}],["meta",{"property":"article:modified_time","content":"2024-08-28T01:59:03.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"\\",\\"image\\":[\\"https://raw.githubusercontent.com/tueo/cloudimg/main/img/20240826111036.png\\"],\\"dateModified\\":\\"2024-08-28T01:59:03.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"LearnData\\",\\"url\\":\\"https://newzone.top\\"}]}"]]},"headers":[{"level":2,"title":"选择 uboot","slug":"选择-uboot","link":"#选择-uboot","children":[]},{"level":2,"title":"构建第一个 uboot 镜像","slug":"构建第一个-uboot-镜像","link":"#构建第一个-uboot-镜像","children":[]},{"level":2,"title":"调整 uboot 镜像","slug":"调整-uboot-镜像","link":"#调整-uboot-镜像","children":[]},{"level":2,"title":"uboot 下命令行方式更新固件方式","slug":"uboot-下命令行方式更新固件方式","link":"#uboot-下命令行方式更新固件方式","children":[]}],"git":{"createdTime":1724670320000,"updatedTime":1724810343000,"contributors":[{"name":"quectel_lte","email":"Product_ruiwei@163.com","commits":2}]},"readingTime":{"minutes":1.13,"words":339},"filePathRelative":"protocol/linux/02_uboot.md","localizedDate":"2024年8月26日","excerpt":"<h2>选择 uboot</h2>\\n<p>这里选择歪多拉的 u-boot，该版本支持 web 升级，项目说明也比较多，适合入门。</p>\\n<h2>构建第一个 uboot 镜像</h2>\\n<p>歪多拉的编译参考\\n<a href=\\"https://widora.cn/compile\\" target=\\"_blank\\" rel=\\"noopener noreferrer\\">编译</a></p>\\n<ul>\\n<li>源码下载</li>\\n</ul>\\n<div class=\\"language-bash\\" data-ext=\\"sh\\" data-title=\\"sh\\"><pre class=\\"language-bash\\"><code><span class=\\"token function\\">git</span> clone https://github.com/widora/u-boot-mt7688.git\\n</code></pre></div>","autoDesc":true}')}}]);