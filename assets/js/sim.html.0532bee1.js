"use strict";(self.webpackChunklearn_data=self.webpackChunklearn_data||[]).push([[713],{3671:(t,e)=>{e.A=(t,e)=>{const a=t.__vccOpts||t;for(const[t,i]of e)a[t]=i;return a}},1621:(t,e,a)=>{a.r(e),a.d(e,{comp:()=>d,data:()=>r});var i=a(7847);const n=[(0,i.Fv)('<h1 id="sim" tabindex="-1"><a class="header-anchor" href="#sim"><span>SIM</span></a></h1><h2 id="command-apdu的最小长度和最大长度" tabindex="-1"><a class="header-anchor" href="#command-apdu的最小长度和最大长度"><span>command APDU的最小长度和最大长度</span></a></h2><ul><li><strong>最小长度为4</strong></li><li><strong>最大长度为261</strong></li></ul><p>这里的APDU协议指SIM中使用的APDU，按照102221文档内容分析。</p><figure><img src="https://raw.githubusercontent.com/tueo/cloudimg/main/img/sim_contents_of_command_apdu.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>command APDU分为两个部分，分别是<code>Header</code>和Body，<code>Header</code>是一个command APDU必须具备的，占4个字节，<code>Body</code>则是可选内容。</p><p>从上面的结构看，命令APDU存在如下4种结构：</p><table><thead><tr><th>Case</th><th>Structure</th></tr></thead><tbody><tr><td>1</td><td>CLA INS P1 P2</td></tr><tr><td>2</td><td>CLA INS P1 P2 Le</td></tr><tr><td>3</td><td>CLA INS P1 P2 Lc Data</td></tr><tr><td>4</td><td>CLA INS P1 P2 Lc Data Le</td></tr></tbody></table><p>最短长度出现在case1中，只有<code>Header</code>部分，因此仅有4个字节。 最长长度出现在case4中，<code>261 = 4(首部) + 1(Lc) + 255(Data) + 1(Le)</code>， Lc只占用1个字节，因此Data最长仅为255 Bytes。</p><ul><li>Lc表示command APDU中data字段的数据size，如果Lc存在，Data的size范围在<code>1~255</code>字节。</li><li>Le表示期待的response APDU的Data字段的最大size，如果Le缺失，表示不期待任何数据，如果Le为「00」，则允许接收256字节的数据，此时SIM卡侧可以返回1到256个字节的数据。</li></ul><blockquote><p>思考：这种特殊约定极易容易引发问题，从协议设定角度和工程实现角度，这种特殊约定越少越好。</p></blockquote><h2 id="response-apdu的最小长度和最大长度" tabindex="-1"><a class="header-anchor" href="#response-apdu的最小长度和最大长度"><span>response APDU的最小长度和最大长度</span></a></h2><ul><li><strong>最小长度为2</strong></li><li><strong>最大长度为258</strong></li></ul><figure><img src="https://raw.githubusercontent.com/tueo/cloudimg/main/img/sim_contents_of_response_apdu.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="常见command列表" tabindex="-1"><a class="header-anchor" href="#常见command列表"><span>常见command列表</span></a></h2><table><thead><tr><th>Command</th><th>Value(Hex)</th><th>Value(Dec)</th></tr></thead><tbody><tr><td>SELECT</td><td>A4</td><td>164</td></tr><tr><td>STATUS</td><td>F2</td><td>242</td></tr><tr><td>READ BINARY</td><td>B0</td><td>176</td></tr><tr><td>UPDATE BINARY</td><td>D6</td><td>214</td></tr><tr><td>READ RECORD</td><td>B2</td><td>178</td></tr><tr><td>UPDATE RECORD</td><td>DC</td><td>220</td></tr><tr><td>GET RESPONSE</td><td>C0</td><td>192</td></tr></tbody></table><h2 id="常见的sim卡文件" tabindex="-1"><a class="header-anchor" href="#常见的sim卡文件"><span>常见的SIM卡文件</span></a></h2><h3 id="iccid" tabindex="-1"><a class="header-anchor" href="#iccid"><span>ICCID</span></a></h3><figure><img src="https://raw.githubusercontent.com/tueo/cloudimg/main/img/20240327131357.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ICCID文件ID是2EF2，在11.11文档中描述了它的结构。在该文件中使用BCD编码格式保存，占10个字节（20位）。</p><p>但是实际上ICCID是在E.118文档中定义的，称为primary account number。在该文档中，ICCID中应该是19位的digit串。</p><figure><img src="https://raw.githubusercontent.com/tueo/cloudimg/main/img/20240327132214.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>因此在实践上，ICCID的长度可能是19位，也可能是20位。当为19位的时候，在EFiccid文件中存储时，会在最后一位补一个F进去，因此也将ICCID从纯数字变成了可能携带字符F的形式。</p><p>结构：</p><ul><li><strong>Major industry identifier</strong> 首先是2位数字行业代码，89表示电信行业。</li><li><strong>Country Code</strong> 2到3位数字的国家码。</li><li><strong>Issuer identifier</strong> 1到4位的数字，一般会是MCC。</li><li><strong>Individual account identification</strong> 自定义的ID，但是一般是Mobile identification number。</li><li>最后一位数字的是校验位，校验算法是Luhn algorithm。</li></ul><p>下面是一个携带F的ICCID的示例：</p><figure><img src="https://raw.githubusercontent.com/tueo/cloudimg/main/img/20240327133833.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ICCID按照一个19位或者20位的字符串（0~F）理解。在实际工程中，发现存在非89开头的ICCID，也存在<code>898600E1122115658504</code> 这种中间插入非0~9的ICCID。只要是19位或者20位，且满足BCD编码格式，都可以作为ICCID。</p>',28)],o={},d=(0,a(3671).A)(o,[["render",function(t,e){return(0,i.uX)(),(0,i.CE)("div",null,n)}]]),r=JSON.parse('{"path":"/protocol/LTE/sim.html","title":"SIM","lang":"zh-CN","frontmatter":{"article":false,"title":"SIM","icon":"sim","date":"2024-03-25T00:00:00.000Z","description":"SIM command APDU的最小长度和最大长度 最小长度为4 最大长度为261 这里的APDU协议指SIM中使用的APDU，按照102221文档内容分析。 command APDU分为两个部分，分别是Header和Body，Header是一个command APDU必须具备的，占4个字节，Body则是可选内容。 从上面的结构看，命令APDU存在如...","head":[["meta",{"property":"og:url","content":"https://newzone.top/protocol/LTE/sim.html"}],["meta",{"property":"og:site_name","content":"三月的油菜花"}],["meta",{"property":"og:title","content":"SIM"}],["meta",{"property":"og:description","content":"SIM command APDU的最小长度和最大长度 最小长度为4 最大长度为261 这里的APDU协议指SIM中使用的APDU，按照102221文档内容分析。 command APDU分为两个部分，分别是Header和Body，Header是一个command APDU必须具备的，占4个字节，Body则是可选内容。 从上面的结构看，命令APDU存在如..."}],["meta",{"property":"og:type","content":"website"}],["meta",{"property":"og:image","content":"https://raw.githubusercontent.com/tueo/cloudimg/main/img/sim_contents_of_command_apdu.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-27T08:34:20.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:alt","content":"SIM"}],["meta",{"property":"article:author","content":"LearnData"}],["meta",{"property":"article:published_time","content":"2024-03-25T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-03-27T08:34:20.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"WebPage\\",\\"name\\":\\"SIM\\",\\"description\\":\\"SIM command APDU的最小长度和最大长度 最小长度为4 最大长度为261 这里的APDU协议指SIM中使用的APDU，按照102221文档内容分析。 command APDU分为两个部分，分别是Header和Body，Header是一个command APDU必须具备的，占4个字节，Body则是可选内容。 从上面的结构看，命令APDU存在如...\\"}"]]},"headers":[{"level":2,"title":"command APDU的最小长度和最大长度","slug":"command-apdu的最小长度和最大长度","link":"#command-apdu的最小长度和最大长度","children":[]},{"level":2,"title":"response APDU的最小长度和最大长度","slug":"response-apdu的最小长度和最大长度","link":"#response-apdu的最小长度和最大长度","children":[]},{"level":2,"title":"常见command列表","slug":"常见command列表","link":"#常见command列表","children":[]},{"level":2,"title":"常见的SIM卡文件","slug":"常见的sim卡文件","link":"#常见的sim卡文件","children":[{"level":3,"title":"ICCID","slug":"iccid","link":"#iccid","children":[]}]}],"git":{"createdTime":1711342995000,"updatedTime":1711528460000,"contributors":[{"name":"quectel_lte","email":"Product_ruiwei@163.com","commits":5}]},"readingTime":{"minutes":2.4,"words":721},"filePathRelative":"protocol/LTE/sim.md","localizedDate":"2024年3月25日","excerpt":"\\n<h2>command APDU的最小长度和最大长度</h2>\\n<ul>\\n<li><strong>最小长度为4</strong></li>\\n<li><strong>最大长度为261</strong></li>\\n</ul>\\n<p>这里的APDU协议指SIM中使用的APDU，按照102221文档内容分析。</p>\\n<figure><img src=\\"https://raw.githubusercontent.com/tueo/cloudimg/main/img/sim_contents_of_command_apdu.png\\" alt=\\"\\" tabindex=\\"0\\" loading=\\"lazy\\"><figcaption></figcaption></figure>","autoDesc":true}')}}]);